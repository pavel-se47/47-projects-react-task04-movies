{"version":3,"file":"static/js/search-page.39bcc53e.chunk.js","mappings":"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","sources":["components/Api/api.js","components/Api/props.js","components/SearchPageMovies/SearchPageMovies.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://api.themoviedb.org/3';\n\nfunction fetchTrendingMovies() {\n  return axios\n    .get(`/trending/all/day?api_key=f62fd78ab53293f9591bba159f0c9694`)\n    .then(response => response.data.results);\n}\n\nfunction fetchSearchMovies({ searchQuery = '', currentPage = 1 }) {\n  return axios\n    .get(\n      `/search/multi?api_key=f62fd78ab53293f9591bba159f0c9694&page=${currentPage}&query=${searchQuery}`\n    )\n    .then(response => response.data.results);\n}\n\nfunction fetchDetailsMovie(id) {\n  return axios\n    .get(`/movie/${id}?api_key=f62fd78ab53293f9591bba159f0c9694`)\n    .then(response => response.data);\n}\n\nfunction fetchCastMovie(id) {\n  return axios\n    .get(`/movie/${id}/credits?api_key=f62fd78ab53293f9591bba159f0c9694`)\n    .then(response => response.data.cast);\n}\n\nfunction fetchReviewsMovie(id) {\n  return axios\n    .get(`/movie/${id}/reviews?api_key=f62fd78ab53293f9591bba159f0c9694`)\n    .then(response => response.data.results);\n}\n\n// eslint-disable-next-line\nexport default {\n  fetchTrendingMovies,\n  fetchSearchMovies,\n  fetchDetailsMovie,\n  fetchCastMovie,\n  fetchReviewsMovie,\n};\n","import React from 'react';\nimport { useLocation, useNavigate, useParams } from 'react-router-dom';\n\nfunction withRouter(Component) {\n  function ComponentWithRouterProp(props) {\n    let location = useLocation();\n    let navigate = useNavigate();\n    let params = useParams();\n\n    return <Component {...props} router={{ location, navigate, params }} />;\n  }\n\n  return ComponentWithRouterProp;\n}\nexport default withRouter;\n","import React, { Component } from 'react';\nimport { NavLink } from 'react-router-dom';\nimport { createBrowserHistory } from 'history';\nimport moviesApi from '../Api/api';\nimport withRouter from 'components/Api/props';\nimport { nanoid } from 'nanoid';\n\nconst history = createBrowserHistory();\n\nclass SearchPage extends Component {\n  state = {\n    searchQuery: '',\n    currentPage: 1,\n    searchMovies: [],\n  };\n\n  componentDidMount() {\n    const { state } = history.location;\n\n    if (this.state.searchMovies === 0 || history.location?.state?.some) {\n      this.setState({\n        searchQuery: state.some.searchQuery,\n        currentPage: state.some.currentPage,\n        searchMovies: state.some.searchMovies,\n      });\n    }\n  }\n\n  pushHistory = () => {\n    history.push(\n      {\n        pathname: '/movies',\n        search: `?query=${this.state.searchQuery}`,\n      },\n      {\n        some: this.state,\n      }\n    );\n  };\n\n  fetchQuery = () => {\n    const { searchQuery, currentPage } = this.state;\n    const options = { searchQuery, currentPage };\n\n    moviesApi\n      .fetchSearchMovies(options)\n      .then(arrSearchMovies => {\n        this.setState(prevState => ({\n          searchMovies: [...prevState.searchMovies, ...arrSearchMovies],\n          currentPage: prevState.currentPage + 1,\n        }));\n      })\n      .catch(error => console.log(error));\n  };\n\n  inputChange = event => {\n    this.setState({ searchQuery: event.currentTarget.value });\n  };\n\n  formSubmit = event => {\n    event.preventDefault();\n\n    this.setState({ currentPage: 1, searchMovies: [] });\n\n    this.fetchQuery();\n  };\n\n  render() {\n    const { searchMovies, searchQuery } = this.state;\n\n    return (\n      <>\n        <form onSubmit={this.formSubmit}>\n          <h1>Search films or Serial</h1>\n          <input\n            type=\"text\"\n            name=\"name\"\n            value={searchQuery}\n            placeholder=\"Batman\"\n            required\n            onChange={this.inputChange}\n          />\n          <button type=\"submit\">Search</button>\n        </form>\n\n        {searchMovies.length > 0 && (\n          <ul key={nanoid()} className=\"searchResult\">\n            <h2>Searching results</h2>\n            {searchMovies.map(searchMovie => (\n              <li key={searchMovie.id}>\n                <NavLink\n                  to={{\n                    pathname: `${searchMovie.id}`,\n                  }}\n                >\n                  <span>{searchMovie.title || searchMovie.name}</span>\n                </NavLink>\n              </li>\n            ))}\n            <button type=\"button\" onClick={this.fetchQuery}>\n              Load more\n            </button>\n          </ul>\n        )}\n\n        {searchMovies.length > 0 && this.pushHistory()}\n      </>\n    );\n  }\n}\n\nexport default withRouter(SearchPage);\n"],"names":["axios","fetchTrendingMovies","then","response","data","results","fetchSearchMovies","searchQuery","currentPage","fetchDetailsMovie","id","fetchCastMovie","cast","fetchReviewsMovie","Component","props","location","useLocation","navigate","useNavigate","params","useParams","router","history","createBrowserHistory","SearchPage","state","searchMovies","pushHistory","push","pathname","search","some","fetchQuery","options","moviesApi","arrSearchMovies","setState","prevState","catch","error","console","log","inputChange","event","currentTarget","value","formSubmit","preventDefault","this","onSubmit","type","name","placeholder","required","onChange","length","className","map","searchMovie","to","title","onClick","nanoid","withRouter"],"sourceRoot":""}